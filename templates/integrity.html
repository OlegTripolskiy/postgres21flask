{% extends "layout.html" %}
  {% block article %}


<!-- =========  НАЧАЛО параграфа Целостность БД  ================================= -->
        <h4 class='toc_h'>Целостность БД.</h4>
        <p>
          <strong>  Целостность базы данных (database integrity)</strong> — соответствие информации, имеющейся в базе данных, внутренней логике, структуре и всем явно заданным правилам базы данных. 
        </p> 
        <b>Например:</b>
        <ol>
          <li>
            <b>Не должно быть явных противоречий между информацией,  об объектах хранящейся в базе данных и самими объектами.</b>
            <br> - Вес запчастей, продуктов и т.д. (физических объектов реального мира) не может быть отрицательным.
            <br> - Цена товара не может быть отрицательной.
            <br> - У номера кредитной карты, например Visa, должно быть 16 цифр.
            <br> - Почтовый код города должен соответствовать определенному формату, принятому в стране и у разных городов не должно быть одинакового кода.
          </li>
          <li>
            <b>Информация должна соответствовать внутренней логике.</b>
            <br> - Если в БД указана минимальная цена продажи товара, то товар не должен продаваться ниже этой цены.
            <br> - У конкретного товара в базе данных не должно быть двух и  более наименований.
            <br> - Ученик в школе может числиться только в одном классе.
            <br> - Покупатель может приобрести много товаров, но товар не может купить покупателя.
          </li>
          <li><b>Данные должны соответствовать заданной структуре.</b>
            <br> - У любого сотрудника предприятия должен быть паспорт и, причем только один.
            <br> - Сотрудник предприятия  может числиться только в одном подразделении (или в нескольких).
            <br> - Один и тот же вид товара может храниться на разных складах.
          </li>
        </ol>
        <p>
          Таким образом, целостность означает правдоподобность (непротиворечивость)  информации хранящейся в БД. Целостность означает, что в базе данных нет заведомо невероятных и невозможных значений. Для обеспечения целостности БД требуется обладать знаниями о соответствии информации, хранящейся в БД и заданным для нее правилам.
        </p>
        <p>
          <strong>Целостность БД  НЕ гарантирует достоверности</strong> (истинности) содержащейся в ней информации. В базу данных пользователи могут ввести недостоверную информацию. 
        </p>
        <p>
        <strong>Достоверность</strong> (истинность) означает, что информация, хранящаяся в БД, соответствует реальным фактам.
        <br><b>Не следует путать целостность и истинность базы данных – это разные понятия и могут реализовываться по-разному.</b>
        </p>
<!-- =========  КОНЕЦ параграфа ЦЕЛОСТНОСТЬ ДБ.  ================================================ -->
        
<!-- =========  НАЧАЛО параграфа  Ограничения целостности БД. ================================================ -->
        <h4 class='toc_h'><strong>Ограничения целостности БД.</strong></h4>
        <p>
          В СУБД имеются встроенные средства, которые могут существенно повысить целостность базы данных. Эти средства называются ограничениями целостности.
        </p>
        <p>
          <strong>Ограничения целостности – специальные средства в CУБД</strong>, позволяющие налагать некоторые ограничения на  информацию в базе данных, позволяющие этой информации быть правдоподобной.
          Рассмотрим еще несколько примеров правил, которые требуют введения ограничений.
        </p> 
        <b>Например:</b>
        <ol>
          <li>Возраст биологических родителей  должен быть больше (на какое-то количество лет) возраста их ребенка.</li>
          <li>Количество символов в почтовом индексе каждого города в стране должно быть одинаковым.</li>
          <li>Количество дней в неделе не может быть больше 7.</li>
          <li>Каждый сотрудник на предприятии должен быть уникально идентифицирован. Например,  иметь уникальный табельный номер, чтобы исключить начисление зарплаты одному сотруднику,  а выплату денег другому.
          </li>
        </ol>
        <p>  
          Фактически, любое ограничение является следствием каких-то свойств объектов и их взаимосвязей. База данных не понимает «смысла» данных, которые в ней хранятся. Для того чтобы информация была хотя бы правдоподобной, в базу данных и встраивают средства, позволяющие это обеспечить. В следующем параграфе рассмотрим, на простом примере, работу ограничения целостности, встроенного в СУБД.
        </p>

        
<!-- =========  КОНЕЦ параграфа Ограничения целостности БД ================================================ -->
        
<!-- =======  НАЧАЛО параграфа   Простое ограничение целостности - типы данных. ==============================  -->
        <h4 class='toc_h'><strong>Простое ограничение целостности - типы данных.</strong></h4>
        <p>
          Типы данных сами по себе уже являются ограничениями целостности. При создании таблицы, в которой будут храниться данные необходимо для каждого столбца определить тип данных, который в этом столбце будут храниться. Если же мы попытаемся ввести данные другого типа, то СУБД не позволит нам этого сделать и выдаст предупреждение.
        </p>
        <p>
          Проверим работу такого ограничения. Для этого создадим вот такую таблицу.
        </p>
        <table class="standart">  <!-- НАЧАЛО таблицы. Стили элементов: .standart  -->
          <tr> <!-- Заголовки столбцов -->
            <th>pid</th>
            <th>pname</th>
            <th>pburn</th>
          </tr>
          <tr>  <!-- Строка 1 -->
            <td>1</td>
            <td>Иванов</td>
            <td>2010-03-25</td>
          </tr>          
          <tr>  <!-- Строка 2 -->
            <td>2</td>
            <td>Петров</td>
            <td>2011-08-14</td>
          </tr>          
          <tr>  <!-- Строка 3 -->
            <td>3</td>
            <td>Сидоров</td>
            <td>2010-06-18</td>
          </tr>
        </table> <!-- КОНЕЦ таблицы -->        
        <p>
          В ней будем хранить информацию об учениках школы. Сначала введем правильные данные, а затем попытаемся ввести в столбец данные другого типа.
          <br>Все имена столбцов будут начинаться с английской буквы 'p' (от слова pupils). 
          <br>Название таблицы – <b>pupils</b>. 
        </p>
        <ol>
          <li><b>Создаем таблицу.</b>
          <!--    КОД      -->
<pre><code class="language-pgsql hljs my">CREATE TABLE pupils (  
    pid integer,    /* номер, тип данных: целое число */
    pname text,     /* фамилия, тип данных: текст */
    pburn date	    /* дата рождения, тип данных: дата */
);
</code></pre>
          </li>          
          <li><b>Заносим в таблицу данные.</b>
            <!--    КОД      -->
<pre><code class="language-pgsql hljs my">INSERT INTO pupils  VALUES 
    (1, 'Иванов',  '2010-03-25'),
    (2, 'Петров',  '2011-08-14'),
    (3, 'Сидоров', '2010-06-18')
;
</code></pre>
          </li>
          <li><b>Смотрим, содержимое таблицы.</b>
            <!--    КОД      -->
<pre><code class="language-pgsql hljs my">SELECT * FROM pupils;
-- ответ сервера
pid |  pname  |    pburn    
-----+---------+------------
   1 | Иванов  | 2010-03-25
   2 | Петров  | 2011-08-14
   3 | Сидоров | 2010-06-18
(3 rows)
</code></pre>
            Все в порядке, данные в таблицу занеслись корректно.
          </li>
          <li>
            <b>Проверяем</b>, что задавая столбцам тип данных, мы уже ограничиваем вносимые данные. Пробуем ввести текст вместо даты.          
          <!--    КОД      -->
<pre><code class="language-pgsql hljs my">INSERT INTO pupils (pid, pname, pburn) VALUES (
    4,        
    'Добров',   
    '18 июля 2012'  /* Дата, записанная текстом */
);

-- Получаем ошибку.  
ERROR:  invalid input syntax for type date: "18 июля 2012"
LINE 4:     '18 июля 2012'  /* Дата, но записанная текстом */
            ^
</code></pre>
            Ограничение целостности сработало. СУБД предотвратила операцию и выдала нам предупреждение об ошибке и ее расположении.
          </li>
        </ol>
        <p>
          Этот простой пример приведен только для того, чтобы рассмотреть  само понятие ограничения целостности. Надо отметить, что в этом примере не все будет работать строго. При вводе значений в таблицу, СУБД постарается преобразовать получаемое значение к типу данных столбца.
        </p>
        <b>Например:</b>
        <ol class="list-a">
          <li>В столбец pid (тип данных: целое число) при вводе ТЕКСТА похожего на число, СУБД постарается преобразовать его в ЧИСЛО.</li>
          <li>В столбец pname (тип данных: текст) при вводе ЧИСЛА, СУБД постарается преобразовать его в ТЕКСТ.</li>
<!--          <li></li>-->
        </ol>
        <b>Пример. Попробуем ввести в таблицу некорректные данные.</b>
        <ol>
          <li><b>Вводим данные.</b>
<pre><code class="language-pgsql hljs my">INSERT INTO pupils (pid, pname, pburn) VALUES (
    '4',         /* Текст, похожий на число */
     125.00,     /* Число вместо текста */
    '2012-07-18'
);
</code></pre>
          Никаких сообщений об ошибке мы не получили. Похоже, что данные благополучно записались в БД.
          </li>
          <li><b>Смотрим записи в таблице</b>
<pre><code class="language-pgsql hljs my">SELECT * FROM pupils;
-- Получили ответ.
 pid |  pname  |   pburn    
-----+---------+------------
   1 | Иванов  | 2010-03-25
   2 | Петров  | 2011-08-14
   3 | Сидоров | 2010-06-18
   4 | 125.00  | 2012-07-18
(4 rows)
</code></pre>
          </li>
        </ol>
        <p>
          СУБД преобразовала информацию в типы данных для соответствующих столбцов  и записала их в таблицу. Внешне, в столбец "pname" записалось число, хотя СУБД считает это текстом и даже попыталась нам помочь, преобразовав один тип данных в другой. 
        </p>
          
<!-- =========  КОНЕЦ параграфа Простое ограничение целостности - типы данных. ================================================ -->
      

        
<!-- =========  НАЧАЛО параграфа  ANIMATE ================================================ -->
        <h4 class='toc_h' >ANIMATE.</h4>
        <p>
          Lorem Ipsum - это текст-"рыба", часто используемый в печати и вэб-дизайне. Lorem Ipsum является стандартной "рыбой" для текстов на латинице с начала XVI века. В то время некий безымянный печатник создал большую коллекцию размеров и форм шрифтов, используя Lorem Ipsum для распечатки образцов. Lorem Ipsum не только успешно пережил без заметных изменений пять веков, но и перешагнул в электронный дизайн. Его популяризации в новое время послужили публикация листов Letraset с образцами Lorem Ipsum в 60-х годах и, в более недавнее время, программы электронной вёрстки типа Aldus PageMaker, в шаблонах которых Lorem Ipsum - это текст-"рыба", часто используемый в печати и вэб-дизайне. Lorem Ipsum является стандартной "рыбой" для текстов на латинице с начала XVI века. В то время некий безымянный печатник создал большую коллекцию размеров и форм шрифтов, используя Lorem Ipsum для распечатки образцов. Lorem Ipsum не только успешно пережил без заметных изменений пять веков, но и перешагнул в электронный дизайн. Его популяризации в новое время послужили публикация листов Letraset с образцами Lorem Ipsum в 60-х годах и, в более недавнее время, программы электронной вёрстки типа Aldus PageMaker, в шаблонах которых
        </p>
   
        <p  >
          Lorem Ipsum - это текст-"рыба", часто используемый в печати и вэб-дизайне. Lorem Ipsum является стандартной "рыбой" для текстов на латинице с начала XVI века. В то время некий безымянный печатник создал большую коллекцию размеров и форм шрифтов, используя Lorem Ipsum для распечатки образцов. Lorem Ipsum не только успешно пережил без заметных изменений пять веков, но и перешагнул в электронный дизайн. Его популяризации в новое время послужили публикация листов Letraset с образцами Lorem Ipsum в 60-х годах и, в более недавнее время, программы электронной вёрстки типа Aldus PageMaker, в шаблонах которых используется Lorem Ipsum.
        </p>
<!-- =========  КОНЕЦ параграфа ANIMATE ================================================ -->



<!-- =========  НАЧАЛО параграфа Синтаксис  ================================================ -->
        <h4 class='toc_h'>Синтаксис.</h4>
        <p>
          Lorem Ipsum - это текст-"рыба", часто используемый в печати и вэб-дизайне. Lorem Ipsum является стандартной "рыбой" для текстов на латинице с начала XVI века. В то время некий безымянный печатник создал большую коллекцию размеров и форм шрифтов, используя Lorem Ipsum для распечатки образцов. Lorem Ipsum не только успешно пережил без заметных изменений пять веков, но и перешагнул в электронный дизайн. Его популяризации в новое время послужили публикация листов Letraset с образцами Lorem Ipsum в 60-х годах и, в более недавнее время, программы электронной вёрстки типа Aldus PageMaker, в шаблонах которых используется Lorem Ipsum.
        </p>
<!-- =========  КОНЕЦ параграфаСинтаксис  ================================================ -->

<!-- =========  НАЧАЛО параграфа Поддержка браузерами  ================================================ -->
        <h4 class='toc_h'>Поддержка браузерами.</h4>
        <p>
          Lorem Ipsum - это текст-"рыба", часто используемый в печати и вэб-дизайне. Lorem Ipsum является стандартной "рыбой" для текстов на латинице с начала XVI века. В то время некий безымянный печатник создал большую коллекцию размеров и форм шрифтов, используя Lorem Ipsum для распечатки образцов. Lorem Ipsum не только успешно пережил без заметных изменений пять веков, но и перешагнул в электронный дизайн. Его популяризации в новое время послужили публикация листов Letraset с образцами Lorem Ipsum в 60-х годах и, в более недавнее время, программы электронной вёрстки типа Aldus PageMaker, в шаблонах которых используется Lorem Ipsum.
        </p>
        <p>
         размеров и форм шрифтов, используя Lorem Ipsum для распечатки образцов. Lorem Ipsum не только успешно пережил без заметных изменений пять веков, но и перешагнул в электронный дизайн. Его популяризации в новое время послужили публикация листов Letraset с образцами Lorem Ipsum в 60-х годах и, в более недавнее время, программы электронной вёрстки типа Aldus PageMaker, в шаблонах которых используется Lorem Ipsum.
        </p>
        <!-- =========  КОНЕЦ параграфаПоддержка браузерами  ================================================ -->

  {% endblock %}